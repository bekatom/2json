-- SQL Test Suite, V6.0, Schema Definition, schem12.std
-- 59-byte ID
-- TEd Version #
-- date_time print
-- *******************************************************************
-- ******                   INTERMEDIATE SQL                    ******
-- *******************************************************************
-- *******************************************************************
-- ****** THIS FILE SHOULD BE RUN UNDER AUTHORIZATION ID FLATER ******
-- *******************************************************************

-- This is a standard schema definition.

-- FIPS Features used:  4, 5, 6, 16, 17, 25, 47, 49

CREATE SCHEMA TIDES

  -- 0.0001 degree is less than 6 meters on the Earth's surface.

  CREATE DOMAIN LONGITUDE_TYPE AS NUMERIC (7, 4)
    CHECK (VALUE BETWEEN -180.0000 AND +179.9999)

  CREATE DOMAIN LATITUDE_TYPE AS NUMERIC (6, 4)
    CHECK (VALUE BETWEEN -90.0000 AND +90.0000)

  CREATE DOMAIN CONST_ID_TYPE AS NUMERIC (2)
    CHECK (VALUE BETWEEN 0 AND 36)

  CREATE DOMAIN AMPLITUDE_TYPE AS DOUBLE PRECISION
    DEFAULT 0E0
    CHECK (VALUE IS NOT NULL AND VALUE >= 0E0)

  -- Epochs are angles, in degrees.
  CREATE DOMAIN EPOCH_TYPE AS NUMERIC (5, 2)
    CHECK (VALUE BETWEEN 0.00 AND 359.99)

  CREATE DOMAIN MERIDIAN_TYPE AS INTERVAL HOUR TO MINUTE
    CHECK (VALUE BETWEEN INTERVAL -'12:59' HOUR TO MINUTE
      AND INTERVAL '13:00' HOUR TO MINUTE)


  -- This table lists legal unit IDs with their names (feet, meters,
  -- etc.) and factor to convert to meters.
  CREATE TABLE UNITS (
    UNIT_ID INT PRIMARY KEY,
    UNIT_NAME VARCHAR (20) NOT NULL UNIQUE,
    UNIT_FACTOR DOUBLE PRECISION NOT NULL)


  CREATE TABLE LOCATIONS (
    LOC_ID DEC (7) PRIMARY KEY,
    LOC_NAME VARCHAR (55),
    DEG_LONGITUDE LONGITUDE_TYPE,
    DEG_LATITUDE LATITUDE_TYPE NOT NULL,
    CONSTRAINT POLES_NULL_LONGITUDE
      CHECK ((DEG_LATITUDE = -90.0000 OR DEG_LATITUDE = 90.0000)
        AND DEG_LONGITUDE IS NULL
             OR
        DEG_LATITUDE BETWEEN -89.9999 AND 89.9999
        AND DEG_LONGITUDE IS NOT NULL),
    UNIT_ID INT NOT NULL
      FOREIGN KEY REFERENCES UNITS,
    DATUM DOUBLE PRECISION,
    MERIDIAN MERIDIAN_TYPE NOT NULL,
    TZFILE VARCHAR (40))


  CREATE TABLE CONSTITUENTS (
    LOC_ID DEC (7) NOT NULL,
    CONST_ID CONST_ID_TYPE NOT NULL,
    UNIQUE (LOC_ID, CONST_ID),
    AMPLITUDE AMPLITUDE_TYPE,
    EPOCH EPOCH_TYPE)


  CREATE VIEW AMPLITUDES (LOC_ID, LOC_NAME, DEG_LONGITUDE, DEG_LATITUDE,
  UNIT_ID, TIDAL_RANGE, J1, K1, K2, L2, M1, M2, M3, M4, M6, M8, N2,
  TWON2, O1,
  OO1, P1, Q1, TWOQ1, R2, S1, S2, S4, S6, T2, LAMBDA2, MU2, NU2, RHO1,
  MK3, TWOMK3, MN4, MS4, TWOSM2, MF, MSF, MM, SA, SSA) AS
    SELECT LOC_ID, LOC_NAME, DEG_LONGITUDE, DEG_LATITUDE, UNIT_ID,
    (SELECT SUM (AMPLITUDE) FROM CONSTITUENTS
      WHERE LOC_ID = LOCATIONS.LOC_ID),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 0),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 1),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 2),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 3),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 4),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 5),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 6),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 7),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 8),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 9),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 10),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 11),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 12),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 13),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 14),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 15),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 16),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 17),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 18),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 19),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 20),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 21),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 22),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 23),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 24),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 25),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 26),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 27),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 28),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 29),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 30),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 31),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 32),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 33),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 34),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 35),
    (SELECT AMPLITUDE FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 36)
    FROM LOCATIONS


  CREATE VIEW EPOCHS (LOC_ID, LOC_NAME, DEG_LONGITUDE, DEG_LATITUDE,
  J1, K1, K2, L2, M1, M2, M3, M4, M6, M8, N2, TWON2, O1,
  OO1, P1, Q1, TWOQ1, R2, S1, S2, S4, S6, T2, LAMBDA2, MU2, NU2, RHO1,
  MK3, TWOMK3, MN4, MS4, TWOSM2, MF, MSF, MM, SA, SSA) AS
    SELECT LOC_ID, LOC_NAME, DEG_LONGITUDE, DEG_LATITUDE,
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 0),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 1),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 2),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 3),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 4),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 5),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 6),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 7),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 8),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 9),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 10),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 11),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 12),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 13),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 14),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 15),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 16),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 17),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 18),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 19),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 20),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 21),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 22),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 23),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 24),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 25),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 26),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 27),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 28),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 29),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 30),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 31),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 32),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 33),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 34),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 35),
    (SELECT EPOCH FROM CONSTITUENTS WHERE LOC_ID =
    LOCATIONS.LOC_ID AND CONST_ID = 36)
    FROM LOCATIONS

-- ************* End of Schema *************
